/* ========================================
   Space Cabin Christmas - Stylesheet
   ======================================== */

/* CSS Variables for theming and warmth progression */
:root {
    /* Base colors */
    --sky-dark: #0a0a1a;
    --sky-purple: #1a1030;
    --snow-white: #f0f5ff;
    --snow-shadow: #c5d5e8;

    /* Cabin colors */
    --cabin-dark: #1a1510;
    --cabin-wood: #3d2817;
    --cabin-trim: #5a3d2b;
    --roof-dark: #252015;

    /* Warm colors (activated by interactions) */
    --warm-glow: #ffaa44;
    --warm-glow-soft: rgba(255, 170, 68, 0.3);
    --fire-orange: #ff6622;
    --fire-red: #ff3311;

    /* Light colors */
    --light-red: #ff4444;
    --light-green: #44ff44;
    --light-blue: #4488ff;
    --light-yellow: #ffff44;
    --light-purple: #ff44ff;
    --light-white: #ffffff;

    /* UI colors */
    --text-light: #e8e0d5;

    /* Warmth level (0-1, controlled by JS) */
    --warmth: 0;

    /* Animation speeds */
    --snow-speed: 10s;
    --glow-pulse: 2s;
}

/* Reset & Base */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html,
body {
    height: 100%;
    overflow: hidden;
}

body {
    font-family: 'Georgia', serif;
    background: var(--sky-dark);
    color: var(--text-light);
}

/* ========================================
   Scene Container
   ======================================== */
.scene {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: linear-gradient(to bottom,
            var(--sky-dark) 0%,
            var(--sky-purple) 40%,
            #1a1525 70%,
            #151520 100%);
    cursor: default;
}

/* Layer system - each layer stacks via z-index */
.layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.layer>* {
    pointer-events: auto;
}

.layer--sky {
    z-index: 1;
}

.layer--snow {
    z-index: 10;
    pointer-events: none;
}

.layer--horizon {
    z-index: 2;
}

.layer--cabin {
    z-index: 5;
}

.layer--foreground {
    z-index: 6;
}

.layer--overlay {
    z-index: 100;
    pointer-events: none;
}

/* ========================================
   Sky & Stars
   ======================================== */
.stars {
    position: absolute;
    width: 100%;
    height: 60%;
    background-image:
        radial-gradient(2px 2px at 20px 30px, #fff, transparent),
        radial-gradient(2px 2px at 40px 70px, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(1px 1px at 90px 40px, #fff, transparent),
        radial-gradient(2px 2px at 130px 80px, rgba(255, 255, 255, 0.9), transparent),
        radial-gradient(1px 1px at 160px 120px, #fff, transparent),
        radial-gradient(2px 2px at 200px 50px, #fff, transparent),
        radial-gradient(1px 1px at 250px 160px, rgba(255, 255, 255, 0.7), transparent),
        radial-gradient(2px 2px at 300px 90px, #fff, transparent),
        radial-gradient(1px 1px at 350px 200px, #fff, transparent),
        radial-gradient(2px 2px at 400px 60px, rgba(255, 255, 255, 0.8), transparent),
        radial-gradient(1px 1px at 450px 140px, #fff, transparent),
        radial-gradient(2px 2px at 500px 30px, #fff, transparent),
        radial-gradient(1px 1px at 550px 180px, rgba(255, 255, 255, 0.9), transparent),
        radial-gradient(2px 2px at 600px 100px, #fff, transparent),
        radial-gradient(1px 1px at 650px 220px, #fff, transparent),
        radial-gradient(2px 2px at 700px 70px, rgba(255, 255, 255, 0.7), transparent),
        radial-gradient(1px 1px at 750px 150px, #fff, transparent),
        radial-gradient(2px 2px at 800px 40px, #fff, transparent);
    background-repeat: repeat;
    background-size: 800px 250px;
    animation: twinkle 8s ease-in-out infinite alternate;
}

@keyframes twinkle {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.7;
    }
}

.moon {
    position: absolute;
    top: 8%;
    right: 15%;
    width: 60px;
    height: 60px;
    background: radial-gradient(circle at 30% 30%, #fffef0, #e8e4d4);
    border-radius: 50%;
    box-shadow:
        0 0 20px rgba(255, 255, 240, 0.4),
        0 0 60px rgba(255, 255, 240, 0.2);
}

/* ========================================
   Northern Lights
   ======================================== */
.northern-lights-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 60%;
    pointer-events: none;
    z-index: 5;
    opacity: 0;
    animation: aurora-fade-in 4s ease forwards;
}

.aurora-layer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    mix-blend-mode: screen;
}

/* Layer 1: Primary green curtain with vertical waves */
.aurora-layer-1 {
    background:
        radial-gradient(ellipse 800px 400px at 20% 0%, rgba(50, 255, 150, 0.4) 0%, transparent 50%),
        radial-gradient(ellipse 600px 350px at 50% 10%, rgba(100, 255, 180, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse 700px 400px at 80% 0%, rgba(80, 255, 160, 0.35) 0%, transparent 50%);
    filter: blur(30px);
    animation: aurora-wave-1 15s ease-in-out infinite;
}

/* Layer 2: Blue-purple accents with different timing */
.aurora-layer-2 {
    background:
        radial-gradient(ellipse 600px 300px at 35% 5%, rgba(100, 180, 255, 0.25) 0%, transparent 50%),
        radial-gradient(ellipse 500px 280px at 70% 0%, rgba(180, 120, 255, 0.2) 0%, transparent 50%);
    filter: blur(40px);
    animation: aurora-wave-2 18s ease-in-out infinite 2s;
}

/* Layer 3: Subtle pink/magenta highlights */
.aurora-layer-3 {
    background:
        radial-gradient(ellipse 400px 250px at 15% 10%, rgba(255, 100, 200, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse 450px 280px at 85% 5%, rgba(200, 150, 255, 0.18) 0%, transparent 50%);
    filter: blur(50px);
    animation: aurora-wave-3 22s ease-in-out infinite 4s;
}

@keyframes aurora-fade-in {
    0% {
        opacity: 0;
        transform: scaleY(0.6);
    }

    100% {
        opacity: 1;
        transform: scaleY(1);
    }
}

/* Wave animation 1: Horizontal movement with vertical stretch */
@keyframes aurora-wave-1 {

    0%,
    100% {
        transform: translateX(0%) skewX(-2deg) scaleY(1);
        opacity: 1;
    }

    25% {
        transform: translateX(-5%) skewX(3deg) scaleY(1.1);
        opacity: 0.9;
    }

    50% {
        transform: translateX(3%) skewX(-1deg) scaleY(0.95);
        opacity: 1;
    }

    75% {
        transform: translateX(-3%) skewX(2deg) scaleY(1.05);
        opacity: 0.95;
    }
}

/* Wave animation 2: Counter movement for depth */
@keyframes aurora-wave-2 {

    0%,
    100% {
        transform: translateX(0%) skewX(1deg) scaleY(1) scaleX(1);
        opacity: 0.8;
    }

    30% {
        transform: translateX(4%) skewX(-2deg) scaleY(1.08) scaleX(1.02);
        opacity: 0.9;
    }

    60% {
        transform: translateX(-4%) skewX(2deg) scaleY(0.92) scaleX(0.98);
        opacity: 0.85;
    }

    90% {
        transform: translateX(2%) skewX(-1deg) scaleY(1.03) scaleX(1.01);
        opacity: 0.8;
    }
}

/* Wave animation 3: Slow pulse and drift */
@keyframes aurora-wave-3 {

    0%,
    100% {
        transform: translateX(0%) translateY(0%) skewX(0deg) scaleY(1);
        opacity: 0.7;
    }

    33% {
        transform: translateX(-3%) translateY(-2%) skewX(3deg) scaleY(1.1);
        opacity: 0.85;
    }

    66% {
        transform: translateX(4%) translateY(1%) skewX(-2deg) scaleY(0.9);
        opacity: 0.75;
    }
}

/* Aurora glow effect on scene */
.scene.aurora-glow .cabin {
    box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.4),
        0 -5px 30px rgba(100, 255, 180, 0.08);
}

.scene.aurora-glow .ground::before {
    box-shadow:
        inset 0 10px 30px rgba(100, 255, 180, 0.03),
        inset 0 -5px 20px rgba(0, 0, 0, 0.2);
}

/* ========================================
   Mountains / Horizon
   ======================================== */
.mountains {
    position: absolute;
    bottom: 25%;
    left: 0;
    width: 100%;
    height: 180px;
    opacity: 0.6;
    transition: opacity 3s ease;
    overflow: hidden;
}

/* Continuous angular mountain range using polygon */
.mountains::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: -10%;
    width: 120%;
    height: 100%;
    background: linear-gradient(to bottom, #12121c 0%, #0e0e16 100%);
    clip-path: polygon(0% 100%,
            5% 60%,
            8% 65%,
            12% 45%,
            16% 50%,
            20% 30%,
            24% 35%,
            28% 55%,
            32% 60%,
            36% 40%,
            40% 45%,
            44% 25%,
            48% 30%,
            52% 50%,
            56% 55%,
            60% 35%,
            64% 40%,
            68% 20%,
            72% 25%,
            76% 45%,
            80% 50%,
            84% 35%,
            88% 40%,
            92% 55%,
            96% 60%,
            100% 45%,
            100% 100%);
}

/* ========================================
   Boston Skyline
   ======================================== */
.boston-skyline {
    position: absolute;
    bottom: 23%;
    left: 0;
    width: 100%;
    height: 220px;
    opacity: 0;
    transition: opacity 3s ease;
    pointer-events: none;
}

/* Background building cluster - creates depth and fills gaps */
.boston-skyline__buildings {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100px;
    background:
        /* Left side cluster */
        linear-gradient(to bottom, #0c0c14 0%, #141420 100%) 5% 100% / 20px 50px no-repeat,
        linear-gradient(to bottom, #0a0a12 0%, #121218 100%) 9% 100% / 16px 65px no-repeat,
        linear-gradient(to bottom, #0b0b13 0%, #131320 100%) 13% 100% / 22px 55px no-repeat,
        linear-gradient(to bottom, #0d0d15 0%, #151520 100%) 17% 100% / 18px 72px no-repeat,
        linear-gradient(to bottom, #0c0c14 0%, #141420 100%) 21% 100% / 14px 48px no-repeat,
        /* Fill around main towers */
        linear-gradient(to bottom, #0a0a12 0%, #121218 100%) 32% 100% / 15px 60px no-repeat,
        linear-gradient(to bottom, #0b0b13 0%, #131320 100%) 42% 100% / 18px 55px no-repeat,
        linear-gradient(to bottom, #0c0c14 0%, #141420 100%) 48% 100% / 14px 68px no-repeat,
        /* Right side financial district */
        linear-gradient(to bottom, #0d0d15 0%, #151520 100%) 55% 100% / 20px 58px no-repeat,
        linear-gradient(to bottom, #0a0a12 0%, #121218 100%) 60% 100% / 16px 72px no-repeat,
        linear-gradient(to bottom, #0b0b13 0%, #131320 100%) 72% 100% / 22px 52px no-repeat,
        linear-gradient(to bottom, #0c0c14 0%, #141420 100%) 78% 100% / 18px 65px no-repeat,
        linear-gradient(to bottom, #0d0d15 0%, #151520 100%) 84% 100% / 20px 48px no-repeat,
        linear-gradient(to bottom, #0a0a12 0%, #121218 100%) 90% 100% / 16px 55px no-repeat,
        linear-gradient(to bottom, #0b0b13 0%, #131320 100%) 95% 100% / 14px 42px no-repeat;
}

/* John Hancock Tower - tallest, slim with angled top */
.boston-skyline__hancock {
    position: absolute;
    bottom: 0;
    left: 26%;
    width: 28px;
    height: 160px;
    background: linear-gradient(to right, #08080f 0%, #0e0e18 50%, #0a0a14 100%);
    clip-path: polygon(0% 2%, 100% 0%, 100% 100%, 0% 100%);
    z-index: 3;
}

.boston-skyline__hancock::before {
    content: '';
    position: absolute;
    top: 2%;
    left: 10%;
    width: 80%;
    height: 95%;
    background:
        repeating-linear-gradient(to bottom,
            transparent 0px,
            transparent 5px,
            rgba(255, 180, 100, 0.06) 5px,
            rgba(255, 180, 100, 0.06) 6px);
}

/* Prudential Tower - wider, chunky with antenna */
.boston-skyline__prudential {
    position: absolute;
    bottom: 0;
    left: 34%;
    width: 35px;
    height: 140px;
    background: linear-gradient(to right, #0a0a14 0%, #101018 50%, #0c0c16 100%);
    z-index: 3;
}

.boston-skyline__prudential::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 3px;
    height: 22px;
    background: linear-gradient(to top, #101018, #181822);
}

.boston-skyline__prudential::after {
    content: '';
    position: absolute;
    top: 4%;
    left: 10%;
    width: 80%;
    height: 92%;
    background:
        repeating-linear-gradient(to bottom,
            transparent 0px,
            transparent 4px,
            rgba(255, 180, 100, 0.05) 4px,
            rgba(255, 180, 100, 0.05) 5px);
}

/* 111 Huntington Ave - domed top */
.boston-skyline__huntington {
    position: absolute;
    bottom: 0;
    left: 44%;
    width: 24px;
    height: 105px;
    background: linear-gradient(to right, #09090f 0%, #0d0d17 50%, #0b0b15 100%);
    border-radius: 6px 6px 0 0;
    z-index: 2;
}

.boston-skyline__huntington::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 16px;
    height: 10px;
    background: #0b0b15;
    border-radius: 50% 50% 0 0;
}

/* One Boston Place */
.boston-skyline__oneboston {
    position: absolute;
    bottom: 0;
    right: 32%;
    width: 22px;
    height: 100px;
    background: linear-gradient(to right, #0a0a12 0%, #0e0e18 50%, #0c0c16 100%);
    z-index: 1;
}

/* Custom House Tower - with pointed top and clock */
.boston-skyline__customhouse {
    position: absolute;
    bottom: 0;
    right: 25%;
    width: 20px;
    height: 90px;
    background: linear-gradient(to right, #0b0b13 0%, #0f0f19 50%, #0d0d17 100%);
    z-index: 2;
}

.boston-skyline__customhouse::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 14px;
    height: 16px;
    background: #0d0d17;
    clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
}

.boston-skyline__customhouse::after {
    content: '';
    position: absolute;
    top: 10%;
    left: 50%;
    transform: translateX(-50%);
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: rgba(255, 220, 150, 0.18);
    box-shadow: 0 0 5px rgba(255, 220, 150, 0.2);
}

/* Federal Reserve - angular */
.boston-skyline__fedreserve {
    position: absolute;
    bottom: 0;
    right: 18%;
    width: 28px;
    height: 83px;
    background: linear-gradient(to right, #0c0c14 0%, #101018 50%, #0e0e16 100%);
    z-index: 1;
}

/* Citgo Sign - iconic Kenmore landmark */
.boston-skyline__citgo {
    position: absolute;
    bottom: 0;
    left: 8%;
    width: 40px;
    height: 87px;
}

/* Building the sign sits on */
.boston-skyline__citgo-building {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 24px;
    height: 45px;
    background: linear-gradient(to right, #0a0a12 0%, #0d0d16 50%, #0b0b14 100%);
}

/* White square frame */
.boston-skyline__citgo-frame {
    position: absolute;
    bottom: 42px;
    left: 50%;
    transform: translateX(-50%);
    width: 32px;
    height: 32px;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid rgba(255, 255, 255, 0.95);
    box-shadow:
        0 0 6px rgba(255, 255, 255, 0.6),
        0 0 12px rgba(255, 255, 255, 0.3);
}

/* Red triangle sign - centered in square, upper half */
.boston-skyline__citgo-outer {
    position: absolute;
    bottom: 51px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-bottom: 20px solid #ff2a2a;
    background: transparent;
    filter: drop-shadow(0 0 6px rgba(255, 50, 50, 0.8));
    z-index: 1;
}

/* Citgo sign glow animation */
@keyframes citgo-glow {

    0%,
    100% {
        filter: drop-shadow(0 0 6px rgba(255, 50, 50, 0.8));
    }

    50% {
        filter: drop-shadow(0 0 10px rgba(255, 60, 60, 1));
    }
}

.scene.warm-4 .boston-skyline__citgo-outer {
    animation: citgo-glow 2.5s ease-in-out infinite;
}

/* Window lights animation for warmth level 4 */
@keyframes window-twinkle {

    0%,
    100% {
        opacity: 0.05;
    }

    50% {
        opacity: 0.1;
    }
}

.scene.warm-4 .boston-skyline__hancock::before,
.scene.warm-4 .boston-skyline__prudential::after {
    animation: window-twinkle 4s ease-in-out infinite;
}

/* Skyline visibility based on warmth */
.scene.warm-3 .mountains {
    opacity: 0.3;
}

.scene.warm-3 .boston-skyline {
    opacity: 0.5;
}

.scene.warm-4 .mountains {
    opacity: 0;
}

.scene.warm-4 .boston-skyline {
    opacity: 0.7;
}

/* ========================================
   Ground / Snow
   ======================================== */
.ground {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 25%;
    background: linear-gradient(to bottom,
            var(--snow-shadow) 0%,
            var(--snow-white) 30%,
            var(--snow-white) 100%);
    border-radius: 100% 100% 0 0 / 30px 30px 0 0;
    box-shadow:
        inset 0 10px 30px rgba(0, 0, 0, 0.1),
        0 -5px 20px rgba(200, 220, 255, 0.3);
}

/* Snow drifts */
.ground::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 10%;
    width: 30%;
    height: 60%;
    background: var(--snow-white);
    border-radius: 100% 100% 0 0 / 50px;
    box-shadow: inset 0 5px 15px rgba(0, 0, 0, 0.05);
}

.ground::after {
    content: '';
    position: absolute;
    bottom: 0;
    right: 5%;
    width: 25%;
    height: 50%;
    background: var(--snow-white);
    border-radius: 100% 100% 0 0 / 40px;
    box-shadow: inset 0 5px 15px rgba(0, 0, 0, 0.05);
}

/* ========================================
   Cabin
   ======================================== */
.cabin {
    position: absolute;
    bottom: 22%;
    left: 50%;
    transform: translateX(-50%);
    width: 320px;
    height: 220px;
}

/* Cabin Body */
.cabin__body {
    position: absolute;
    bottom: 0;
    left: 20px;
    width: 280px;
    height: 140px;
    background: linear-gradient(to bottom,
            var(--cabin-wood) 0%,
            var(--cabin-dark) 100%);
    border-radius: 4px;
    box-shadow:
        inset 0 2px 0 var(--cabin-trim),
        0 10px 30px rgba(0, 0, 0, 0.5);
    z-index: 3;
}

/* Wood texture lines */
.cabin__body::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(to bottom,
            transparent 0px,
            transparent 18px,
            rgba(0, 0, 0, 0.15) 18px,
            rgba(0, 0, 0, 0.15) 20px);
    border-radius: 4px;
}

/* Cabin Roof */
.cabin__roof {
    position: absolute;
    bottom: 130px;
    left: 20px;
    width: 280px;
    height: 100px;
    overflow: visible;
    z-index: 2;
}

.cabin__roof::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 0;
    border-left: 140px solid transparent;
    border-right: 140px solid transparent;
    border-bottom: 80px solid var(--roof-dark);
}

/* Snow on left roof edge */
.cabin__roof-snow-left {
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 155px;
    height: 14px;
    background: linear-gradient(to bottom,
            var(--snow-white) 0%,
            rgba(255, 255, 255, 0.95) 100%);
    transform-origin: 0% 0%;
    transform: rotate(330deg);
    box-shadow:
        0 2px 6px rgba(255, 255, 255, 0.4),
        inset 0 -1px 3px rgba(200, 230, 255, 0.3);
    border-radius: 0 3px 0 0;
    z-index: 5;
}

/* Snow on right roof edge */
.cabin__roof-snow-right {
    position: absolute;
    bottom: -4px;
    right: 0;
    width: 155px;
    height: 14px;
    background: linear-gradient(to bottom,
            var(--snow-white) 0%,
            rgba(255, 255, 255, 0.95) 100%);
    transform-origin: 100% 0%;
    transform: rotate(-330deg);
    box-shadow:
        0 2px 6px rgba(255, 255, 255, 0.4),
        inset 0 -1px 3px rgba(200, 230, 255, 0.3);
    border-radius: 3px 0 0 0;
    z-index: 5;
}

/* Snow cap at roof peak */
.cabin__roof-snow-peak {
    position: absolute;
    top: 13px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 12px;
    background: var(--snow-white);
    border-radius: 50% 50% 30% 30%;
    box-shadow:
        0 2px 6px rgba(255, 255, 255, 0.4),
        inset 0 -1px 3px rgba(200, 230, 255, 0.3);
    z-index: 6;
}

/* Chimney */
.cabin__chimney {
    position: absolute;
    bottom: 140px;
    right: 70px;
    width: 35px;
    height: 90px;
    background: linear-gradient(to right, #4a3525, #3d2817);
    border-radius: 2px 2px 0 0;
    z-index: 1;
}

.cabin__chimney::before {
    content: '';
    position: absolute;
    top: -8px;
    left: -4px;
    width: 43px;
    height: 12px;
    background: var(--snow-white);
    border-radius: 4px;
}

/* Smoke from chimney */
.cabin__smoke {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 20px;
    opacity: 0;
    transition: opacity 0.5s ease;
}

.cabin__smoke.active {
    opacity: 1;
}

.cabin__smoke::before,
.cabin__smoke::after {
    content: '';
    position: absolute;
    background: rgba(200, 200, 200, 0.4);
    border-radius: 50%;
    animation: smoke 3s ease-out infinite;
}

.cabin__smoke::before {
    width: 15px;
    height: 15px;
    left: 0;
    animation-delay: 0s;
}

.cabin__smoke::after {
    width: 12px;
    height: 12px;
    left: 8px;
    animation-delay: 1s;
}

@keyframes smoke {
    0% {
        transform: translateY(0) scale(1);
        opacity: 0.4;
    }

    100% {
        transform: translateY(-40px) scale(2);
        opacity: 0;
    }
}

/* ========================================
   Windows
   ======================================== */
.cabin__window {
    position: absolute;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.cabin__window:hover {
    transform: scale(1.02);
}

.cabin__window:active {
    transform: scale(0.98);
}

/* Main Window */
.cabin__window--main {
    top: 25px;
    left: 30px;
    width: 90px;
    height: 70px;
    background: #1a2030;
    border: 4px solid var(--cabin-trim);
    border-radius: 4px;
    overflow: hidden;
}

.cabin__window-glow {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center,
            var(--warm-glow) 0%,
            var(--warm-glow-soft) 50%,
            transparent 70%);
    opacity: 0;
    transition: opacity 0.5s ease;
}

/* Frost overlay */
.cabin__window-frost {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        radial-gradient(ellipse at 20% 30%, rgba(255, 255, 255, 0.5) 0%, transparent 30%),
        radial-gradient(ellipse at 80% 20%, rgba(255, 255, 255, 0.4) 0%, transparent 25%),
        radial-gradient(ellipse at 40% 70%, rgba(255, 255, 255, 0.45) 0%, transparent 28%),
        radial-gradient(ellipse at 90% 80%, rgba(255, 255, 255, 0.4) 0%, transparent 22%),
        radial-gradient(ellipse at 15% 85%, rgba(255, 255, 255, 0.45) 0%, transparent 25%),
        radial-gradient(ellipse at 60% 50%, rgba(255, 255, 255, 0.35) 0%, transparent 20%),
        radial-gradient(ellipse at 10% 50%, rgba(240, 245, 255, 0.3) 0%, transparent 35%),
        radial-gradient(ellipse at 70% 15%, rgba(240, 245, 255, 0.35) 0%, transparent 30%),
        linear-gradient(135deg, rgba(200, 220, 255, 0.7) 0%, rgba(230, 240, 255, 0.5) 50%, rgba(200, 220, 255, 0.6) 100%);
    opacity: 1;
    pointer-events: none;
    z-index: 3;
    transition: opacity 2.5s ease;
    filter: blur(1px);
}

.cabin__window.lit .cabin__window-glow {
    opacity: 1;
    animation: flicker 4s ease-in-out infinite;
}

/* Frost melting stages - organic fade */
.warm-1 .cabin__window-frost {
    opacity: 0.7;
    filter: blur(1.5px);
}

.warm-2 .cabin__window-frost {
    opacity: 0.45;
    filter: blur(2px);
}

.warm-3 .cabin__window-frost {
    opacity: 0.2;
    filter: blur(2.5px);
}

.warm-4 .cabin__window-frost {
    opacity: 0;
    filter: blur(3px);
}

/* Icicles on windows */
.cabin__window::before,
.cabin__window::after {
    content: '';
    position: absolute;
    top: -1px;
    width: 0;
    height: 0;
    border-left: 3px solid transparent;
    border-right: 3px solid transparent;
    border-top: 20px solid rgba(200, 220, 255, 0.8);
    opacity: 1;
    pointer-events: none;
    z-index: 4;
    filter: drop-shadow(0 2px 3px rgba(150, 180, 220, 0.5));
    transition: opacity 1.5s ease, transform 1.5s ease;
}

.cabin__window::before {
    left: 25%;
    border-top-width: 18px;
}

.cabin__window::after {
    right: 20%;
    border-top-width: 22px;
}

/* Icicles disappear as warmth increases */
.warm-1 .cabin__window::before,
.warm-1 .cabin__window::after {
    opacity: 0.8;
    transform: scaleY(0.9);
}

.warm-2 .cabin__window::before,
.warm-2 .cabin__window::after {
    opacity: 0.5;
    transform: scaleY(0.7);
}

.warm-3 .cabin__window::before,
.warm-3 .cabin__window::after {
    opacity: 0.2;
    transform: scaleY(0.4);
}

.warm-4 .cabin__window::before,
.warm-4 .cabin__window::after {
    opacity: 0;
    transform: scaleY(0.1);
}

@keyframes flicker {

    0%,
    100% {
        opacity: 1;
    }

    92% {
        opacity: 1;
    }

    93% {
        opacity: 0.8;
    }

    94% {
        opacity: 1;
    }

    96% {
        opacity: 0.9;
    }

    97% {
        opacity: 1;
    }
}

/* Window panes */
.cabin__window-frame {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 4px;
    padding: 4px;
    z-index: 2;
}

.cabin__window-pane {
    background: rgba(100, 140, 180, 0.2);
    border: 1px solid var(--cabin-trim);
}

.cabin__window.lit .cabin__window-pane {
    background: rgba(255, 200, 100, 0.3);
}

/* Silhouette inside window */
.cabin__silhouette {
    position: absolute;
    bottom: 5px;
    left: 50%;
    transform: translateX(-50%);
    width: 25px;
    height: 30px;
    background: transparent;
    opacity: 0;
    transition: opacity 0.8s ease 0.3s;
    z-index: 1;
}

.cabin__window.lit .cabin__silhouette {
    opacity: 1;
    background: radial-gradient(ellipse at center bottom, rgba(0, 0, 0, 0.6) 0%, transparent 70%);
}

/* Side Window */
.cabin__window--side {
    top: 40px;
    right: 40px;
    width: 50px;
    height: 50px;
    background: #1a2030;
    border: 3px solid var(--cabin-trim);
    border-radius: 50%;
    overflow: hidden;
}

.cabin__window--side .cabin__window-glow {
    background: radial-gradient(circle at center,
            var(--warm-glow) 0%,
            transparent 70%);
}

/* ========================================
   Door
   ======================================== */
.cabin__door {
    position: absolute;
    bottom: 10%;
    left: 55%;
    transform: translateX(-50%);
    width: 50px;
    height: 80px;
    background: linear-gradient(to right,
            #2a1a10 0%,
            #3d2515 50%,
            #2a1a10 100%);
    border: 3px solid var(--cabin-trim);
    border-bottom: none;
    border-radius: 4px 4px 0 0;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.cabin__door:hover {
    transform: translateX(-50%) scale(1.02);
}

.cabin__door:active {
    transform: translateX(-50%) scale(0.98);
}

/* Door handle */
.cabin__door::after {
    content: '';
    position: absolute;
    top: 50%;
    right: 8px;
    width: 8px;
    height: 8px;
    background: #8b7355;
    border-radius: 50%;
    box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.5);
}

/* Wreath on door */
.cabin__wreath {
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    width: 25px;
    height: 25px;
    border: 5px solid #2d5a2d;
    border-radius: 50%;
    box-shadow:
        inset 0 0 5px rgba(0, 0, 0, 0.3),
        0 2px 4px rgba(0, 0, 0, 0.2);
}

.cabin__wreath::before {
    content: '';
    position: absolute;
    top: -3px;
    left: 50%;
    transform: translateX(-50%);
    width: 8px;
    height: 10px;
    background: #cc2222;
    border-radius: 2px;
}

/* Door opening animation */
.cabin__door {
    transform-origin: left center;
    transition: transform 0.4s ease;
}

.cabin__door.door--open {
    transform: translateX(-50%) perspective(200px) rotateY(-50deg);
}

/* Interior visible when door opens */
.cabin__interior {
    position: absolute;
    top: 0;
    left: -5px;
    width: 30px;
    height: 100%;
    opacity: 0;
    transition: opacity 0.4s ease;
    pointer-events: none;
    overflow: visible;
}

.cabin__door.door--open .cabin__interior {
    opacity: 1;
}

/* Warm glow from interior */
.interior__glow {
    position: absolute;
    top: 0;
    left: 100%;
    width: 100px;
    height: 100%;
    background: radial-gradient(ellipse at 0% 50%,
            rgba(255, 200, 100, 0.4) 0%,
            rgba(255, 170, 68, 0.2) 30%,
            transparent 60%);
    filter: blur(10px);
    pointer-events: none;
}

/* Person peeking around edge of door */
.interior__person {
    position: absolute;
    top: 12%;
    left: 150%;
    width: 24px;
    height: 32px;
    animation: person-peek 0.5s ease-out forwards;
    transform-origin: right center;
}

@keyframes person-peek {
    0% {
        transform: translateX(-30px);
        opacity: 0;
    }

    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Santa hat */
.person__hat {
    position: absolute;
    top: -15%;
    left: 20%;
    transform: rotate(10deg);
    width: 0;
    height: 0;
    border-left: 9px solid transparent;
    border-right: 9px solid transparent;
    border-bottom: 13px solid #cc2222;
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3));
    z-index: 2;
}

.hat__pom {
    position: absolute;
    top: -2px;
    left: 0;
    transform: translateX(-50%);
    width: 5px;
    height: 5px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.person__hat::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: -9px;
    width: 18px;
    height: 3px;
    background: white;
    border-radius: 1px;
}

/* Face - tilted to peek around */
.person__face {
    position: relative;
    width: 18px;
    height: 22px;
    background: #f4c2a0;
    border-radius: 45% 45% 50% 50%;
    margin: 7px auto 0;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    transform: rotate(10deg);
    z-index: 1;
}

/* Eyes */
.person__eyes {
    position: absolute;
    top: 8px;
    left: 50%;
    transform: translateX(-50%);
    width: 11px;
    display: flex;
    justify-content: space-between;
}

.eye {
    width: 2.5px;
    height: 2.5px;
    background: #2a1a10;
    border-radius: 50%;
    animation: blink 3s ease-in-out infinite;
}

@keyframes blink {

    0%,
    48%,
    52%,
    100% {
        transform: scaleY(1);
    }

    50% {
        transform: scaleY(0.1);
    }
}

/* Smile */
.person__smile {
    position: absolute;
    bottom: 5px;
    left: 50%;
    transform: translateX(-50%);
    width: 9px;
    height: 5px;
    border: 1.5px solid #2a1a10;
    border-top: none;
    border-radius: 0 0 9px 9px;
}

/* Speech bubble */
.person__bubble {
    position: absolute;
    top: 0;
    right: -50px;
    background: white;
    color: #2a1a10;
    padding: 3px 6px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: bold;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    animation: bubble-appear 0.3s ease-out 0.5s backwards, bubble-float 2s ease-in-out 0.8s infinite;
}

.person__bubble::before {
    content: '';
    position: absolute;
    top: 50%;
    left: -3px;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-right: 4px solid white;
    border-top: 3px solid transparent;
    border-bottom: 3px solid transparent;
}

@keyframes bubble-appear {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes bubble-float {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-2px);
    }
}

/* ========================================
   String Lights
   ======================================== */
.cabin__lights {
    position: absolute;
    bottom: 112px;
    left: 30px;
    width: 260px;
    height: 30px;
    cursor: pointer;
    z-index: 4;
}

/* Wire */
.cabin__lights::before {
    content: '';
    position: absolute;
    top: 5px;
    left: 0;
    width: 100%;
    height: 2px;
    background: #222;
    border-radius: 1px;
}

.light {
    position: absolute;
    top: 0;
    width: 10px;
    height: 14px;
    background: #444;
    border-radius: 50% 50% 50% 50% / 30% 30% 70% 70%;
    opacity: 0.5;
    transition: all 0.3s ease;
    box-shadow: none;
}

/* Position lights along wire using indexed variable */
.light {
    --light-index: 0;
    left: calc(5% + var(--light-index) * 10%);
}

.light--1 {
    --light-index: 0;
}

.light--2 {
    --light-index: 1;
}

.light--3 {
    --light-index: 2;
}

.light--4 {
    --light-index: 3;
}

.light--5 {
    --light-index: 4;
}

.light--6 {
    --light-index: 5;
}

.light--7 {
    --light-index: 6;
}

.light--8 {
    --light-index: 7;
}

.light--9 {
    --light-index: 8;
}

.light--10 {
    --light-index: 9;
}

/* Lights ON state */
.cabin__lights.on .light {
    opacity: 1;
    animation: glow-pulse var(--glow-pulse) ease-in-out infinite;
}

/* Light colors and glow effects */
.cabin__lights.on .light--1,
.cabin__lights.on .light--6 {
    background: var(--light-red);
    box-shadow: 0 0 10px var(--light-red), 0 0 20px var(--light-red);
}

.cabin__lights.on .light--2,
.cabin__lights.on .light--7 {
    background: var(--light-green);
    box-shadow: 0 0 10px var(--light-green), 0 0 20px var(--light-green);
}

.cabin__lights.on .light--3,
.cabin__lights.on .light--8 {
    background: var(--light-blue);
    box-shadow: 0 0 10px var(--light-blue), 0 0 20px var(--light-blue);
}

.cabin__lights.on .light--4,
.cabin__lights.on .light--9 {
    background: var(--light-yellow);
    box-shadow: 0 0 10px var(--light-yellow), 0 0 20px var(--light-yellow);
}

.cabin__lights.on .light--5,
.cabin__lights.on .light--10 {
    background: var(--light-purple);
    box-shadow: 0 0 10px var(--light-purple), 0 0 20px var(--light-purple);
}

@keyframes glow-pulse {

    0%,
    100% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.7;
        transform: scale(0.95);
    }
}

/* ========================================
   Tree Area Container (Groups tree + gifts for unified scaling)
   ======================================== */
.tree-area {
    position: absolute;
    bottom: 16%;
    right: 12%;
    width: 180px;
    height: 220px;
    transform-origin: bottom right;
    transition: transform 0.3s ease;
}

/* ========================================
   Space Tree / Antenna
   ======================================== */
.tree {
    position: absolute;
    bottom: 0;
    right: 20px;
    width: 140px;
    height: 200px;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.tree:hover {
    transform: scale(1.02);
}

.tree:active {
    transform: scale(0.98);
}

/* Tree trunk */
.tree__trunk {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 28px;
    height: 55px;
    background: linear-gradient(to right, #3a2515, #5a3d25, #4d3520, #3a2515);
    border-radius: 4px;
    box-shadow: inset 2px 0 0 rgba(255, 255, 255, 0.1), inset -2px 0 0 rgba(0, 0, 0, 0.2);
}

/* Tree branches (triangular layers) */
.tree__branches {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
}

.tree__branch {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: solid transparent;
    border-right: solid transparent;
    border-bottom: solid #1a5a1a;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.tree__branch::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 50%;
    transform: translateX(-50%);
    border-left: solid transparent;
    border-right: solid transparent;
    border-bottom: solid #0d3d0d;
}

.tree__branch--1 {
    bottom: 110px;
    border-left-width: 30px;
    border-right-width: 30px;
    border-bottom-width: 40px;
    z-index: 4;
}

.tree__branch--1::after {
    border-left-width: 25px;
    border-right-width: 25px;
    border-bottom-width: 35px;
}

.tree__branch--2 {
    bottom: 80px;
    border-left-width: 40px;
    border-right-width: 40px;
    border-bottom-width: 45px;
    z-index: 3;
}

.tree__branch--2::after {
    border-left-width: 35px;
    border-right-width: 35px;
    border-bottom-width: 40px;
}

.tree__branch--3 {
    bottom: 50px;
    border-left-width: 50px;
    border-right-width: 50px;
    border-bottom-width: 50px;
    z-index: 2;
}

.tree__branch--3::after {
    border-left-width: 45px;
    border-right-width: 45px;
    border-bottom-width: 45px;
}

/* Add a fourth branch for fuller look */
.tree__branch--4 {
    bottom: 20px;
    border-left-width: 60px;
    border-right-width: 60px;
    border-bottom-width: 55px;
    z-index: 1;
}

.tree__branch--4::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 50%;
    transform: translateX(-50%);
    border-left-width: 55px;
    border-right-width: 55px;
    border-bottom-width: 50px;
}

/* Tree star */
.tree__star {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 32px;
    opacity: 0.4;
    transition: all 0.5s ease;
    filter: grayscale(1) drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
}

.tree__star::before {
    content: 'â­';
}

.tree.decorated .tree__star {
    opacity: 1;
    filter: grayscale(0) drop-shadow(0 0 15px gold) drop-shadow(0 0 25px orange);
    animation: star-glow 2s ease-in-out infinite;
}

@keyframes star-glow {

    0%,
    100% {
        transform: translateX(-50%) scale(1);
    }

    50% {
        transform: translateX(-50%) scale(1.1);
    }
}

/* Tree ornaments container */
.tree__ornaments {
    position: absolute;
    top: 40px;
    left: 0;
    width: 100%;
    height: 140px;
}

.ornament {
    position: absolute;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--ornament-color, #FF3366);
    opacity: 0;
    transform: scale(0);
    transition: all 0.3s ease;
    box-shadow:
        0 2px 4px rgba(0, 0, 0, 0.3),
        inset -2px -2px 4px rgba(0, 0, 0, 0.2),
        inset 2px 2px 4px rgba(255, 255, 255, 0.4);
    transform-origin: top center;
}

.ornament.visible {
    opacity: 1;
    transform: scale(1);
    animation: gentle-swing 3s ease-in-out infinite;
}

/* Vary animation timing for each ornament */
.ornament--1.visible {
    animation-delay: 0s;
    animation-duration: 3.2s;
}

.ornament--2.visible {
    animation-delay: 0.5s;
    animation-duration: 2.8s;
}

.ornament--3.visible {
    animation-delay: 1s;
    animation-duration: 3.5s;
}

.ornament--4.visible {
    animation-delay: 0.3s;
    animation-duration: 3s;
}

.ornament--5.visible {
    animation-delay: 0.8s;
    animation-duration: 2.9s;
}

.ornament--6.visible {
    animation-delay: 0.2s;
    animation-duration: 3.3s;
}

.ornament--7.visible {
    animation-delay: 0.6s;
    animation-duration: 3.1s;
}

.ornament--8.visible {
    animation-delay: 0.4s;
    animation-duration: 3.4s;
}

@keyframes gentle-swing {

    0%,
    100% {
        transform: scale(1) rotate(-2deg);
    }

    50% {
        transform: scale(1) rotate(2deg);
    }
}

/* Ornament positioning */
.ornament--1 {
    top: 22px;
    left: 50%;
}

.ornament--2 {
    top: 35px;
    left: 33%;
}

.ornament--3 {
    top: 42px;
    left: 62%;
}

.ornament--4 {
    top: 58px;
    left: 26%;
}

.ornament--5 {
    top: 65px;
    left: 56%;
}

.ornament--6 {
    top: 0px;
    left: 42%;
}

.ornament--7 {
    top: 88px;
    left: 33%;
}

.ornament--8 {
    top: 90px;
    left: 68%;
}

/* ========================================
   Foreground Objects
   ======================================== */
.object {
    position: absolute;
    font-size: 28px;
    cursor: pointer;
    transition: transform 0.3s ease;
    filter: drop-shadow(0 3px 3px rgba(0, 0, 0, 0.3));
}

.object:hover {
    transform: scale(1.15) rotate(-5deg);
}

.object:active {
    transform: scale(0.95);
}

.object--gift {
    bottom: 22%;
}

#gift-1 {
    left: 20%;
}

#gift-2 {
    left: 30%;
    font-size: 22px;
}

.object--snowman {
    bottom: 21%;
    left: 12%;
    font-size: 40px;
    transition: all 0.5s ease;
    overflow: visible;
}

.snowman-image {
    width: 120px;
    height: auto;
    max-height: 120px;
    object-fit: contain;
    filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.3));
    opacity: 0;
    position: absolute;
    top: -110px;
    left: -30px;
    transform: scale(0);
    transition: all 0.5s ease;
}

.object--snowman.transformed .snowman-image {
    opacity: 1;
    transform: scale(1);
}

.object--snowman.transformed {
    font-size: 0;
}

/* ========================================
   Gifts Container (Under Tree)
   ======================================== */
.gifts-container {
    position: absolute;
    bottom: -6%;
    right: -14%;
    width: 160px;
    height: 80px;
}

.gifts-container .object--gift {
    position: absolute;
    transition: opacity 0.8s ease, transform 0.3s ease;
    bottom: auto;
    left: auto;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4)) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.gifts-container .object--gift:hover {
    transform: scale(1.2) rotate(-8deg);
    filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.5)) drop-shadow(0 3px 6px rgba(0, 0, 0, 0.4));
}

.gifts-container #gift-1 {
    bottom: 5px;
    left: 0px;
    font-size: 18px;
    --float-distance: -4px;
    animation: gift-float 3s ease-in-out infinite;
}

.gifts-container #gift-2 {
    bottom: 8px;
    left: 62px;
    font-size: 20px;
    --float-distance: -6px;
    animation: gift-float 3.5s ease-in-out infinite;
}

.gifts-container #gift-3 {
    bottom: 32px;
    left: 18px;
    font-size: 16px;
    --float-distance: -3px;
    animation: gift-float 3.2s ease-in-out infinite;
}

.gifts-container #gift-4 {
    bottom: 32px;
    left: 50px;
    font-size: 18px;
    --float-distance: -5px;
    animation: gift-float 3.8s ease-in-out infinite;
}

.gifts-container #gift-5 {
    bottom: 2px;
    left: 30px;
    font-size: 16px;
    --float-distance: -4px;
    animation: gift-float 3.3s ease-in-out infinite;
}

/* Subtle floating animation for gifts - uses CSS variable for distance */
@keyframes gift-float {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(var(--float-distance, -4px));
    }
}

/* Gift reveal animations */
.gift-revealing {
    animation: gift-appear 1s ease forwards;
}

@keyframes gift-appear {
    0% {
        opacity: 0;
        transform: scale(0) translateY(20px);
    }

    60% {
        transform: scale(1.2) translateY(-5px);
    }

    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Consolidated gift opening reveal animation - uses CSS variables for customization */
@keyframes gift-reveal {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(var(--reveal-scale, 1.3)) rotate(var(--reveal-rotate, 0deg));
    }

    100% {
        transform: scale(1.1);
        filter: brightness(var(--reveal-brightness, 1));
    }
}

/* Different gift opening reveals - use shared animation with custom properties */
.gift-opened-heart,
.gift-opened-star,
.gift-opened-sparkle {
    animation: gift-reveal 0.6s ease forwards;
}

.gift-opened-heart {
    --reveal-scale: 1.4;
    --reveal-rotate: 10deg;
}

.gift-opened-star {
    --reveal-scale: 1.3;
    --reveal-rotate: -10deg;
    --reveal-brightness: 1.3;
}

.gift-opened-sparkle {
    --reveal-scale: 1.3;
    --reveal-rotate: -5deg;
    /* Note: Original had multi-stage rotation (5deg -> -5deg) but simplified
       to single rotation for consistency. Visual difference is negligible. */
}

.object.opened {
    animation: unwrap 0.5s ease forwards;
}

@keyframes unwrap {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.3) rotate(10deg);
    }

    100% {
        transform: scale(1);
    }
}

.object.waving {
    animation: wave 0.5s ease;
}

@keyframes wave {

    0%,
    100% {
        transform: rotate(0deg);
    }

    25% {
        transform: rotate(-15deg);
    }

    75% {
        transform: rotate(15deg);
    }
}

/* Secret spot */
.secret-spot {
    position: absolute;
    bottom: 24%;
    left: 42%;
    font-size: 16px;
    opacity: 0.3;
    cursor: pointer;
    transition: all 0.3s ease;
    animation: sparkle 3s ease-in-out infinite;
}

.secret-spot:hover {
    opacity: 1;
    transform: scale(1.5);
}

@keyframes sparkle {

    0%,
    100% {
        opacity: 0.2;
        transform: scale(1);
    }

    50% {
        opacity: 0.5;
        transform: scale(1.2);
    }
}

/* ========================================
   Snowflakes
   ======================================== */
.snowflake {
    position: absolute;
    top: -20px;
    color: white;
    font-size: 1em;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    animation: fall linear infinite;
    pointer-events: none;
    opacity: 0.8;
}

@keyframes fall {
    0% {
        transform: translateY(-10px) rotate(0deg);
        opacity: 0;
    }

    10% {
        opacity: 0.8;
    }

    90% {
        opacity: 0.8;
    }

    100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
    }
}

/* Snow intensity variations */
.scene.snow-light .snowflake {
    animation-duration: 12s;
}

.scene.snow-medium .snowflake {
    animation-duration: 8s;
}

.scene.snow-heavy .snowflake {
    animation-duration: 5s;
}

/* ========================================
   UI Controls
   ======================================== */
.controls {
    position: fixed;
    bottom: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    z-index: 200;
}

.control-btn {
    width: 44px;
    height: 44px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    font-size: 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.control-btn:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: scale(1.1);
}

.control-btn:active {
    transform: scale(0.95);
}

/* ========================================
   Warmth Meter
   ======================================== */
.warmth-meter {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 8px;
    height: 100px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
    z-index: 200;
}

.warmth-meter__fill {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 0%;
    background: linear-gradient(to top,
            var(--fire-red) 0%,
            var(--fire-orange) 50%,
            var(--warm-glow) 100%);
    border-radius: 4px;
    transition: height 0.5s ease;
}

/* ========================================
   Interaction Counter
   ======================================== */
.interaction-counter {
    position: fixed;
    bottom: 20px;
    left: 20px;
    padding: 8px 16px;
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    font-size: 14px;
    color: var(--text-light);
    z-index: 200;
    opacity: 0.7;
    transition: opacity 0.3s ease;
}

.interaction-counter:hover {
    opacity: 1;
}

/* ========================================
   Secret Reveal Overlay
   ======================================== */
#secret-reveal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 30px 40px;
    background: rgba(20, 15, 30, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
    max-width: 400px;
    pointer-events: none;
    animation: reveal-in 0.5s ease;
}

#secret-reveal:empty {
    display: none;
}

@keyframes reveal-in {
    from {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
    }

    to {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
    }
}

#secret-reveal h2 {
    margin-bottom: 15px;
    color: var(--warm-glow);
}

#secret-reveal p {
    margin-bottom: 20px;
    line-height: 1.6;
}

#secret-reveal button {
    padding: 10px 25px;
    background: var(--warm-glow);
    border: none;
    border-radius: 25px;
    color: #1a1510;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s ease;
}

#secret-reveal button:hover {
    transform: scale(1.05);
}

/* Secret Message Fragment Styles */
.secret-message__overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 150;
    pointer-events: auto;
    animation: fade-in 0.3s ease;
}

.secret-message__content {
    background: rgba(20, 15, 30, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 40px;
    max-width: 500px;
    text-align: center;
    animation: reveal-in 0.5s ease;
    pointer-events: auto;
}

.secret-message__emoji {
    font-size: 4rem;
    display: block;
    margin-bottom: 20px;
}

.secret-message__title {
    color: var(--warm-glow);
    font-size: 1.8rem;
    margin-bottom: 20px;
}

.secret-message__text {
    line-height: 1.8;
    font-size: 1.1rem;
    color: rgba(255, 255, 255, 0.9);
}

.secret-message__close {
    margin-top: 20px;
    padding: 10px 25px;
    background: var(--warm-glow);
    border: none;
    border-radius: 25px;
    color: #1a1510;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.secret-message__close:hover {
    transform: scale(1.05);
}

@keyframes fade-in {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* ========================================
   Scene Warmth Progression
   ======================================== */
.scene.warm-1 {
    background: linear-gradient(to bottom,
            #0d0d1d 0%,
            #1d1235 40%,
            #1d1528 70%,
            #181522 100%);
}

.scene.warm-2 {
    background: linear-gradient(to bottom,
            #100d1d 0%,
            #201538 40%,
            #20182a 70%,
            #1a1525 100%);
}

.scene.warm-3 {
    background: linear-gradient(to bottom,
            #15101f 0%,
            #25183d 40%,
            #251a2d 70%,
            #1d1828 100%);
}

.scene.warm-4 {
    background: linear-gradient(to bottom,
            #1a1322 0%,
            #2a1b42 40%,
            #2a1d30 70%,
            #201a2a 100%);
}

/* ========================================
   Responsive Adjustments
   ======================================== */
@media (max-width: 768px) {
    .cabin {
        transform: translateX(-50%) scale(0.78);
        transform-origin: bottom center;
    }

    .tree-area {
        transform: scale(0.75);
    }

    .object {
        font-size: 24px;
    }

    .object--snowman {
        font-size: 32px;
        transform: scale(0.8);
        transform-origin: bottom center;
    }

    .snowman-image {
        width: 95px;
        max-height: 95px;
        top: -88px;
        left: -24px;
    }

    /* Controls adjustment for tablets */
    .controls {
        bottom: 15px;
        right: 15px;
    }

    .control-btn {
        width: 40px;
        height: 40px;
        font-size: 18px;
    }

    /* Secret reveal on tablets */
    #secret-reveal {
        max-width: 85%;
        padding: 25px 30px;
    }

    /* Mountains smaller on tablets */
    .mountains {
        height: 140px;
        bottom: 20%;
    }

    .moon {
        width: 50px;
        height: 50px;
    }

    /* Boston skyline adjustments */
    .boston-skyline {
        transform: scale(0.8);
        transform-origin: bottom center;
    }
}

@media (max-width: 480px) {
    .cabin {
        transform: translateX(-50%) scale(0.625);
        transform-origin: bottom center;
        bottom: 24%;
    }

    /* Controls on mobile */
    .controls {
        bottom: 10px;
        right: 10px;
        gap: 8px;
    }

    .control-btn {
        width: 36px;
        height: 36px;
        font-size: 16px;
    }

    /* Interaction counter on mobile */
    .interaction-counter {
        bottom: 10px;
        left: 10px;
        padding: 6px 12px;
        font-size: 12px;
    }

    /* Secret reveal on mobile */
    #secret-reveal {
        max-width: 90%;
        padding: 20px 25px;
        border-radius: 12px;
    }

    #secret-reveal h2 {
        font-size: 1.3em;
        margin-bottom: 12px;
    }

    #secret-reveal p {
        font-size: 0.95em;
        margin-bottom: 15px;
    }

    #secret-reveal button {
        padding: 8px 20px;
        font-size: 14px;
    }

    .warmth-meter {
        display: none;
    }

    /* Mountains on mobile */
    .mountains {
        height: 120px;
        bottom: 18%;
    }

    .moon {
        width: 40px;
        height: 40px;
        top: 10%;
        right: 10%;
    }

    /* Tree area unified scaling on mobile */
    .tree-area {
        transform: scale(0.6);
        bottom: 20%;
    }

    /* Boston skyline smaller on mobile */
    .boston-skyline {
        transform: scale(0.5);
        transform-origin: bottom center;
    }

    /* Snowflakes smaller on mobile */
    .snowflake {
        font-size: 12px;
    }

    /* Objects smaller on mobile */
    .object {
        font-size: 20px;
    }

    .object--snowman {
        font-size: 28px;
        transform: scale(0.7);
        transform-origin: bottom center;
    }

    .snowman-image {
        width: 75px;
        max-height: 75px;
        top: -70px;
        left: -18px;
    }
}

/* Extra small phones */
@media (max-width: 360px) {
    .cabin {
        transform: translateX(-50%) scale(0.53);
        transform-origin: bottom center;
        bottom: 26%;
    }

    #secret-reveal {
        padding: 15px 20px;
    }

    #secret-reveal h2 {
        font-size: 1.1em;
    }

    #secret-reveal p {
        font-size: 0.85em;
    }

    .tree-area {
        transform: scale(0.5);
    }

    .object--snowman {
        transform: scale(0.6);
        transform-origin: bottom center;
    }

    .snowman-image {
        width: 60px;
        max-height: 60px;
        top: -56px;
        left: -14px;
    }

    .object--snowman {
        transform: scale(0.6);
        transform-origin: bottom center;
    }

    .boston-skyline {
        transform: scale(0.4);
        transform-origin: bottom center;
    }
}
